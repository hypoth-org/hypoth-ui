/**
 * Table Component Styles
 *
 * Structured data tables with sorting, selection, and proper semantics.
 */

@layer components {
  /* Table root */
  .ds-table {
    --_table-border: var(--ds-table-border, 1px solid var(--ds-color-border, #e5e7eb));
    --_table-radius: var(--ds-table-radius, var(--ds-radius-md, 0.375rem));
    --_table-bg: var(--ds-table-bg, var(--ds-color-surface, #fff));
    --_table-header-bg: var(--ds-table-header-bg, var(--ds-color-surface-muted, #f9fafb));
    --_table-row-hover: var(--ds-table-row-hover, var(--ds-color-surface-hover, #f3f4f6));
    --_table-row-selected: var(--ds-table-row-selected, var(--ds-color-primary-100, #dbeafe));
    --_table-stripe: var(--ds-table-stripe, var(--ds-color-surface-muted, #f9fafb));

    width: 100%;
    overflow: hidden;
    background-color: var(--_table-bg);
    border: var(--_table-border);
    border-radius: var(--_table-radius);
    border-collapse: separate;
    border-spacing: 0;
  }

  /* Table wrapper for overflow scrolling */
  .ds-table-wrapper {
    width: 100%;
    overflow-x: auto;
  }

  /* Table header */
  .ds-table__header {
    background-color: var(--_table-header-bg);
  }

  .ds-table__header .ds-table__row {
    border-bottom: var(--_table-border);
  }

  /* Table body */
  .ds-table__body {
    /* Body styles */
  }

  .ds-table__body .ds-table__row:not(:last-child) {
    border-bottom: var(--_table-border);
  }

  /* Table row */
  .ds-table__row {
    transition: background-color 150ms ease;
  }

  .ds-table__body .ds-table__row:hover {
    background-color: var(--_table-row-hover);
  }

  .ds-table__row[data-selected] {
    background-color: var(--_table-row-selected);
  }

  .ds-table__row[data-selected]:hover {
    background-color: var(--_table-row-selected);
  }

  /* Table head cell */
  .ds-table__head {
    padding: 0.75rem 1rem;
    font-size: var(--ds-font-size-sm, 0.875rem);
    font-weight: var(--ds-font-weight-semibold, 600);
    color: var(--ds-color-text-muted, #6b7280);
    text-align: left;
    white-space: nowrap;
    vertical-align: middle;
  }

  .ds-table__head[data-align="center"] {
    text-align: center;
  }

  .ds-table__head[data-align="right"] {
    text-align: right;
  }

  /* Sortable header */
  .ds-table__head[data-sortable] {
    cursor: pointer;
    user-select: none;
  }

  .ds-table__head[data-sortable]:hover {
    color: var(--ds-color-text, #111827);
  }

  .ds-table__head[data-sortable]:focus-visible {
    outline: 2px solid var(--ds-color-focus, #2563eb);
    outline-offset: -2px;
  }

  /* Sort indicator */
  .ds-table__sort-icon {
    display: inline-flex;
    align-items: center;
    margin-left: 0.25rem;
    vertical-align: middle;
  }

  .ds-table__sort-icon svg {
    width: 1rem;
    height: 1rem;
    opacity: 0.4;
    transition: opacity 150ms ease, transform 150ms ease;
  }

  .ds-table__head[data-sortable]:hover .ds-table__sort-icon svg {
    opacity: 0.7;
  }

  .ds-table__head[data-sort-direction="asc"] .ds-table__sort-icon svg,
  .ds-table__head[data-sort-direction="desc"] .ds-table__sort-icon svg {
    opacity: 1;
  }

  .ds-table__head[data-sort-direction="desc"] .ds-table__sort-icon svg {
    transform: rotate(180deg);
  }

  /* Table cell */
  .ds-table__cell {
    padding: 0.75rem 1rem;
    font-size: var(--ds-font-size-sm, 0.875rem);
    color: var(--ds-color-text, #111827);
    vertical-align: middle;
  }

  .ds-table__cell[data-align="center"] {
    text-align: center;
  }

  .ds-table__cell[data-align="right"] {
    text-align: right;
  }

  /* Selection checkbox cell */
  .ds-table__head--checkbox,
  .ds-table__cell--checkbox {
    width: 3rem;
    padding-right: 0;
  }

  /* Striped variant */
  .ds-table[data-striped] .ds-table__body .ds-table__row:nth-child(even) {
    background-color: var(--_table-stripe);
  }

  .ds-table[data-striped] .ds-table__body .ds-table__row:nth-child(even):hover {
    background-color: var(--_table-row-hover);
  }

  /* Compact variant */
  .ds-table[data-size="compact"] .ds-table__head,
  .ds-table[data-size="compact"] .ds-table__cell {
    padding: 0.5rem 0.75rem;
    font-size: var(--ds-font-size-xs, 0.75rem);
  }

  /* Spacious variant */
  .ds-table[data-size="spacious"] .ds-table__head,
  .ds-table[data-size="spacious"] .ds-table__cell {
    padding: 1rem 1.25rem;
  }

  /* Borderless variant */
  .ds-table[data-borderless] {
    border: none;
  }

  .ds-table[data-borderless] .ds-table__header .ds-table__row,
  .ds-table[data-borderless] .ds-table__body .ds-table__row:not(:last-child) {
    border-bottom: none;
  }

  /* Fixed layout */
  .ds-table[data-fixed] {
    table-layout: fixed;
  }

  /* Sticky header */
  .ds-table[data-sticky-header] .ds-table__header {
    position: sticky;
    top: 0;
    z-index: 1;
  }

  /* Empty state */
  .ds-table__empty {
    padding: 2rem 1rem;
    font-size: var(--ds-font-size-sm, 0.875rem);
    color: var(--ds-color-text-muted, #6b7280);
    text-align: center;
  }

  /* Caption */
  .ds-table__caption {
    padding: 0.75rem 1rem;
    font-size: var(--ds-font-size-sm, 0.875rem);
    color: var(--ds-color-text-muted, #6b7280);
    text-align: left;
    caption-side: bottom;
  }

  /* Footer */
  .ds-table__footer {
    background-color: var(--_table-header-bg);
  }

  .ds-table__footer .ds-table__row {
    border-top: var(--_table-border);
  }

  .ds-table__footer .ds-table__cell {
    font-weight: var(--ds-font-weight-medium, 500);
  }
}
