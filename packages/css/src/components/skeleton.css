/**
 * Skeleton Component Styles
 *
 * Loading placeholders with shimmer animation.
 * GPU-accelerated for smooth performance.
 */

@layer components {
  /* Skeleton base */
  .ds-skeleton {
    --_skeleton-bg: var(--ds-skeleton-bg, var(--ds-color-surface-muted, #e5e7eb));
    --_skeleton-highlight: var(--ds-skeleton-highlight, var(--ds-color-surface, #f3f4f6));
    --_skeleton-radius: var(--ds-skeleton-radius, var(--ds-radius-md, 0.375rem));

    position: relative;
    display: block;
    overflow: hidden;
    background-color: var(--_skeleton-bg);
    border-radius: var(--_skeleton-radius);
  }

  /* Shimmer animation */
  .ds-skeleton::after {
    position: absolute;
    inset: 0;
    content: "";
    background: linear-gradient(
      90deg,
      transparent 0%,
      var(--_skeleton-highlight) 50%,
      transparent 100%
    );
    transform: translateX(-100%);
    animation: ds-skeleton-shimmer 1.5s ease-in-out infinite;
    /* GPU acceleration */
    will-change: transform;
  }

  @keyframes ds-skeleton-shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  /* Variant: text */
  .ds-skeleton[data-variant="text"] {
    height: 1em;
    --_skeleton-radius: var(--ds-radius-sm, 0.25rem);
  }

  /* Variant: circular */
  .ds-skeleton[data-variant="circular"] {
    --_skeleton-radius: var(--ds-radius-full, 9999px);
  }

  /* Variant: rectangular */
  .ds-skeleton[data-variant="rectangular"] {
    --_skeleton-radius: 0;
  }

  /* Variant: rounded */
  .ds-skeleton[data-variant="rounded"] {
    --_skeleton-radius: var(--ds-radius-lg, 0.5rem);
  }

  /* Size presets */
  .ds-skeleton[data-size="xs"] {
    height: 0.75rem;
  }

  .ds-skeleton[data-size="sm"] {
    height: 1rem;
  }

  .ds-skeleton[data-size="md"] {
    height: 1.5rem;
  }

  .ds-skeleton[data-size="lg"] {
    height: 2rem;
  }

  .ds-skeleton[data-size="xl"] {
    height: 3rem;
  }

  /* Width utilities */
  .ds-skeleton[data-width="full"] {
    width: 100%;
  }

  .ds-skeleton[data-width="3/4"] {
    width: 75%;
  }

  .ds-skeleton[data-width="1/2"] {
    width: 50%;
  }

  .ds-skeleton[data-width="1/4"] {
    width: 25%;
  }

  /* No animation variant */
  .ds-skeleton[data-no-animation]::after {
    display: none;
  }

  /* Pulse animation variant */
  .ds-skeleton[data-animation="pulse"] {
    animation: ds-skeleton-pulse 1.5s ease-in-out infinite;
  }

  .ds-skeleton[data-animation="pulse"]::after {
    display: none;
  }

  @keyframes ds-skeleton-pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  /* Wave animation (default shimmer) */
  .ds-skeleton[data-animation="wave"]::after {
    /* Use default shimmer */
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .ds-skeleton::after {
      animation: none;
      transform: none;
      background: var(--_skeleton-highlight);
      opacity: 0.5;
    }

    .ds-skeleton[data-animation="pulse"] {
      animation: none;
      opacity: 0.7;
    }
  }

  /* Dark mode adjustments */
  @media (prefers-color-scheme: dark) {
    .ds-skeleton {
      --_skeleton-bg: var(--ds-skeleton-bg, #374151);
      --_skeleton-highlight: var(--ds-skeleton-highlight, #4b5563);
    }
  }

  /* Skeleton group for common layouts */
  .ds-skeleton-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .ds-skeleton-group[data-direction="row"] {
    flex-direction: row;
  }

  /* Common skeleton layouts */
  .ds-skeleton-avatar {
    width: 2.5rem;
    height: 2.5rem;
    flex-shrink: 0;
    --_skeleton-radius: var(--ds-radius-full, 9999px);
  }

  .ds-skeleton-title {
    height: 1.5rem;
    width: 60%;
    --_skeleton-radius: var(--ds-radius-sm, 0.25rem);
  }

  .ds-skeleton-text {
    height: 1rem;
    width: 100%;
    --_skeleton-radius: var(--ds-radius-sm, 0.25rem);
  }

  .ds-skeleton-text:last-child {
    width: 80%;
  }

  .ds-skeleton-button {
    height: 2.25rem;
    width: 6rem;
    --_skeleton-radius: var(--ds-radius-md, 0.375rem);
  }

  .ds-skeleton-image {
    width: 100%;
    aspect-ratio: 16 / 9;
    --_skeleton-radius: var(--ds-radius-md, 0.375rem);
  }
}
